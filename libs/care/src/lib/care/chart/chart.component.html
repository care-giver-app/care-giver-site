<div class="chart-container">
    <div class="chart-title">
        <h2>{{ chartTitle }}</h2>
    </div>
    <div class="chart-controls" style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
        <mat-form-field appearance="fill">
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="pickerStart" [(ngModel)]="startDate" (dateChange)="onDateRangeChange()"
                [ngModelOptions]="{standalone: true}">
            <mat-datepicker-toggle matSuffix [for]="pickerStart"></mat-datepicker-toggle>
            <mat-datepicker #pickerStart></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>End Date</mat-label>
            <input matInput [matDatepicker]="pickerEnd" [(ngModel)]="endDate" (dateChange)="onDateRangeChange()"
                [ngModelOptions]="{standalone: true}">
            <mat-datepicker-toggle matSuffix [for]="pickerEnd"></mat-datepicker-toggle>
            <mat-datepicker #pickerEnd></mat-datepicker>
        </mat-form-field>
    </div>

    <ng-container [ngSwitch]="chartType">
        <care-timeseries-scatter-chart *ngSwitchCase="'scatter'" [startDate]="startDate" [endDate]="endDate"
            [datasets]="scatterChartDatasets"></care-timeseries-scatter-chart>

        <care-line-chart *ngSwitchCase="'line'" [startDate]="startDate" [endDate]="endDate"
            [datasets]="lineChartDatasets"></care-line-chart>
    </ng-container>
</div>